/* esm.sh - esbuild bundle(openai@4.67.2/internal/qs/stringify) denonext production */
import{encode as V,is_buffer as W,maybe_map as z}from"/v135/openai@4.67.2/denonext/internal/qs/utils.js";import{default_format as K,formatters as O}from"/v135/openai@4.67.2/denonext/internal/qs/formats.js";var x=Object.prototype.hasOwnProperty,H={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,r){return String(e)+"["+r+"]"},repeat(e){return String(e)}},s=Array.isArray,B=Array.prototype.push,P=function(e,r){B.apply(e,s(r)?r:[r])},U=Date.prototype.toISOString,o={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:V,encodeValuesOnly:!1,format:K,formatter:O[K],indices:!1,serializeDate(e){return U.call(e)},skipNulls:!1,strictNullHandling:!1};function q(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}var F={};function C(e,r,i,n,a,f,y,h,c,d,w,m,p,u,g,k,_,T){let t=e,E=T,S=0,v=!1;for(;(E=E.get(F))!==void 0&&!v;){let l=E.get(e);if(S+=1,typeof l<"u"){if(l===S)throw new RangeError("Cyclic object value");v=!0}typeof E.get(F)>"u"&&(S=0)}if(typeof d=="function"?t=d(r,t):t instanceof Date?t=p?.(t):i==="comma"&&s(t)&&(t=z(t,function(l){return l instanceof Date?p?.(l):l})),t===null){if(f)return c&&!k?c(r,o.encoder,_,"key",u):r;t=""}if(q(t)||W(t)){if(c){let l=k?r:c(r,o.encoder,_,"key",u);return[g?.(l)+"="+g?.(c(t,o.encoder,_,"value",u))]}return[g?.(r)+"="+g?.(String(t))]}let N=[];if(typeof t>"u")return N;let D;if(i==="comma"&&s(t))k&&c&&(t=z(t,c)),D=[{value:t.length>0?t.join(",")||null:void 0}];else if(s(d))D=d;else{let l=Object.keys(t);D=w?l.sort(w):l}let A=h?String(r).replace(/\./g,"%2E"):String(r),j=n&&s(t)&&t.length===1?A+"[]":A;if(a&&s(t)&&t.length===0)return j+"[]";for(let l=0;l<D.length;++l){let b=D[l],R=typeof b=="object"&&typeof b.value<"u"?b.value:t[b];if(y&&R===null)continue;let I=m&&h?b.replace(/\./g,"%2E"):b,M=s(t)?typeof i=="function"?i(j,I):j:j+(m?"."+I:"["+I+"]");T.set(e,S);let Q=new WeakMap;Q.set(F,T),P(N,C(R,M,i,n,a,f,y,h,i==="comma"&&k&&s(t)?null:c,d,w,m,p,u,g,k,_,Q))}return N}function G(e=o){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");let r=e.charset||o.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let i=K;if(typeof e.format<"u"){if(!x.call(O,e.format))throw new TypeError("Unknown format option provided.");i=e.format}let n=O[i],a=o.filter;(typeof e.filter=="function"||s(e.filter))&&(a=e.filter);let f;if(e.arrayFormat&&e.arrayFormat in H?f=e.arrayFormat:"indices"in e?f=e.indices?"indices":"repeat":f=o.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let y=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:o.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:o.addQueryPrefix,allowDots:y,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:o.allowEmptyArrays,arrayFormat:f,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:o.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?o.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:o.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:o.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:o.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:o.encodeValuesOnly,filter:a,format:i,formatter:n,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:o.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:o.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:o.strictNullHandling}}function X(e,r={}){let i=e,n=G(r),a,f;typeof n.filter=="function"?(f=n.filter,i=f("",i)):s(n.filter)&&(f=n.filter,a=f);let y=[];if(typeof i!="object"||i===null)return"";let h=H[n.arrayFormat],c=h==="comma"&&n.commaRoundTrip;a||(a=Object.keys(i)),n.sort&&a.sort(n.sort);let d=new WeakMap;for(let p=0;p<a.length;++p){let u=a[p];n.skipNulls&&i[u]===null||P(y,C(i[u],u,h,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}let w=y.join(n.delimiter),m=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),w.length>0?m+w:""}export{X as stringify};
//# sourceMappingURL=stringify.js.map